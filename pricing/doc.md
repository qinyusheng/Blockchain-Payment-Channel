# 思路

## 目标

测试动态定价方案对网络交易处理能力的提升

思路：比较静态定价和动态定价两种策略之下的交易处理能力的区别，量化优化成果

## 需求

### 网络模型

1. 形式：二维数组
2. 意义：第i行 第j列 表示i->j的抵押金数值
3. 网络生成：
   * 默认网络
   * 随机生成网络: small world
4. 关键问题：抵押金分配 (现阶段只能随机了)

### 交易生成模型

1. 固定交易集：比较对两种交易集的处理能力的差别
2. 随机交易集

### 定价模型

1. 手续费：路由节点在交易经过时自动收取
2. 参考因素：
   * 与交易相关的两条通道上的平衡情况
   * 运营商制定的定价
   * 交易的金额

### 需要收集的数据

1. 对网络：交易完成情况
2. 对运营商：收益大小
3. 对用户：总共支付的手续费

### 路由算法

1. 对每个可能的节点对$(i,j)$运行一次，计算出所有可能的路径 $P_{ij}$
2. 完成$(i,j)$上的交易时，计算出$P_{ij}$中交易金额最小的路径
3. 只利用不超过6个节点参与的路径

## 实验方案

指标：**交易完成率**，路由的交易总金额，节点总收益

### 收获

1. 其实大部分交易都能被完成。
2. 交易金额越小，交易完成率越高
3. 猜想：尽量选择短的通道，这样意味着消耗更少网络的权重资源，能达到更高的完成率
4. 定价方案对交易完成率的影响很小

### 实验一

对比实验：同一网络，两种定价思路，比较交易完成率
实验结果：动态定价策略优势甚至完成率更低，即便偶尔高也高的不多

> 10万条交易的测试结果: 交易金额在1-5之间，10个节点，通道权重5-9
>> static: 94131
>> dynamic1: 94018
>> dynamic2: 93763

### 实验二

对比实验：同一网络，各节点相同定价与不同定价对网络处理能力的影响
实验结果：其实没有什么区别

### 实验三

对比实验：同一网络，四种定价策略比较
实验结果：优化效率不高

环境设置：各通道权重相同，10个节点，10000条交易额 1 的交易,初始抵押金相同
数据结果：
PS C:\Users\Lenovo\Desktop\我的\源码\pricing> python main.py  
static: 8645
dynamic1: 8642
dynamic2: 8627
dynamic3: 8627
PS C:\Users\Lenovo\Desktop\我的\源码\pricing> python main.py  
static: 9165
dynamic1: 9147
dynamic2: 9162
dynamic3: 9162
PS C:\Users\Lenovo\Desktop\我的\源码\pricing> python main.py  
static: 8994
dynamic1: 8990
dynamic2: 8996
dynamic3: 8996
